<!DOCTYPE html>
<html>
<head>
  <title>StoresExplorer</title>
  <%= stylesheet_link_tag    "application", media: "all" %>
  <%= javascript_include_tag "application" %>
  <%= render partial: "share/google_map" %>
  <%= csrf_meta_tags %>
</head>
<body>

  <div class="container">
    <%= render partial: 'share/header' %>
    <div class="row-fluid">
      <div class="span12">
        <div class="row-fluid">
          <div class="span6">
            <h2 class="upper"><%= @store.name %>
            </h2>
          </div>
          <div class="span6">
            <button class="btn btn-warning add_to_db">Add To Database</button>
          </div>
        </div>
        <h3 class="upper lighter"><%= @store.city %>, <%= @store.state %>, <%= @store.country %></h3>
        <div class="row-fluid relative_position">
          <div class="span12 map_canvas">
          </div>
          <div class="detail_container span5">
            <div class="detail_panel">
              <div class="address_panel">
                <%= @store.address %>
              </div>
              <div>
                <%= @store.categories %>
              </div>
              <div>
                <%= @store.neighborhood %>
              </div>
            </div>
            <div class="detail_panel">
              <div>
                Web: <%= link_to @store.url %>
              </div>
              <div>
                Tel: <%= @store.tel %>
              </div>
            </div>
            <div class="detail_panel connect_panel">
              <div>
                Source ID: <%= @store.source_id %>
              </div>
            </div>
          </div>
          <div class="detail_container span5 coordinate_container">
            <h5><%= @store.latitude %>, <%= @store.longitude %></h5>
          </div>
        </div>
        <div class="row-fluid">
          <p class="hours_panel">
            HOURS: <%= @store.hours %>
          </p>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
  function initialize() {
    var myLatlng = new google.maps.LatLng(<%= @store.latitude %>, <%= @store.longitude %>);
    var mapOptions = {
      zoom: 17,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
    }
    var map = new google.maps.Map($(".map_canvas")[0], mapOptions);

    var marker = new google.maps.Marker({
        position: myLatlng,
        title:"<%= @store.address %>"
    });

    // To add the marker to the map, call setMap();
    marker.setMap(map);
    
  }
  google.maps.event.addDomListener(window, 'load', initialize);
  </script>

</body>
</html>
